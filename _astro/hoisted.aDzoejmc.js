const q=e=>{const t=e.clientWidth;document.body.style.setProperty("--search-area-width",`${t}px`)},f=(e,t)=>{e.setAttribute("aria-expanded",t.toString())},S=(e,t)=>{if(document.body.dataset.isSearching=t.toString(),e.setAttribute("aria-hidden",(!t).toString()),e.nextElementSibling.setAttribute("aria-hidden",(!t).toString()),t){const s=e.querySelector("input");if(s.focus(),s.value){const n=s.nextElementSibling;n.disabled=!1}}},b=()=>{const{top:e}=document.querySelector("#js-nav").getBoundingClientRect();document.body.style.setProperty("--search-area-top",`${Math.max(e/16,2.5)}rem`)},T=e=>new RegExp(`[^。！？.\\n]*${e}[^。！？.\\n]*[。！？.]?`,"gi"),j=e=>new RegExp(`(?<!<[^>]*)(${e})(?![^<]*>)`,"gi"),R={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:"https://copyright-edu.axies.jp/sugowaka35",ASSETS_PREFIX:void 0}.PUBLIC_SITE_URL??"https://copyright-edu.axies.jp/sugowaka35",y=document.documentElement.lang==="en",P=(e,t)=>(e.match(T(t))??[]).map(n=>n.trim()),N=async()=>await(await fetch(`${R}/pagedata-${y?"en":"ja"}.json`)).json(),E=e=>{e.innerHTML="",e.classList.remove("is-active")},L=(e,t,s)=>{let n=!1;s.classList.add("is-active"),e.forEach(({title:a,pageDir:i,contents:l})=>{const m=[];if(l.forEach(o=>{m.push(...P(o,t))}),m.length>0){n=!0;const o=document.createElement("div");o.dataset.pageDir=i,o.insertAdjacentHTML("afterbegin","<ul></ul>"),o.insertAdjacentHTML("afterbegin",`<div>${a}</div>`),s.appendChild(o),m.forEach((d,g)=>{const u=new URLSearchParams,c=d.replaceAll(j(t),'<span class="js-hit">$1</span>');u.set("s",t),u.set("i",(g+1).toString()),o.querySelector("ul").insertAdjacentHTML("beforeend",`<li>
          <a href="${R}${y?"/en/":"/"}${i}/?${u.toString()}">${c}</a>
        </li>`)})}}),n||s.insertAdjacentHTML("afterbegin",`<p class="js-no-result">${y?"No results found.":"検索結果が見つかりませんでした。"}</p>`)},M=(e,t)=>{if(e.textContent.trim()==="")return;const s=e.textContent.replace(T(t),"<span>$&</span>").replace(j(t),'<span class="js-hit text-orange-600 bg-yellow-100">$1</span>'),n=document.createRange().createContextualFragment(s);e.parentNode.replaceChild(n,e)},W=e=>{if(!e)return[];const t=[],s=n=>{n.childNodes.forEach(a=>{a.nodeType===Node.TEXT_NODE?a.nodeValue.trim()!==""&&t.push(a):a.nodeType===Node.ELEMENT_NODE&&s(a)})};return s(e),t},k=e=>{const t=Array.from(document.querySelectorAll(".js-hit")).map(n=>n.parentElement);[...new Set(t)].forEach((n,a)=>{a+1===e&&n&&n.scrollIntoView({behavior:"smooth",block:"center"})})},D=()=>{const e=Number(new URLSearchParams(window.location.search).get("i"));if(!e)return;const t=window.location.pathname.replace(/^\/|\/$/g,"").split("/").filter(a=>a!==""),s=document.querySelector(`[data-page-dir="${t.at(-1)}"]`);if(!s)return;const n=s.querySelectorAll("li")[e-1];n&&(n.classList.add("is-searched"),n.scrollIntoView({behavior:"instant",block:"start"}))};(async()=>{const e=document.querySelector(".js-search-form"),t=e.querySelector("input"),s=e.querySelector("button"),n=document.querySelector(".js-search-trigger"),a=document.querySelector(".js-close-trigger-search"),i=document.querySelector(".js-search-result"),l=document.querySelector(".js-search-area"),m=document.querySelector(".js-search-overlay"),o=document.querySelector(".section-content"),d=new URLSearchParams(window.location.search).get("s"),g=Number(new URLSearchParams(window.location.search).get("i")),u=await N();let c=!1;const w=()=>{c=!c,S(l,c),f(n,c)},x=()=>{c=!0,S(l,!0),f(n,!0)},$=()=>{c=!1,S(l,!1),f(n,!1)};new ResizeObserver(()=>{q(l)}).observe(document.documentElement),[n,a,m].forEach(r=>{r?.addEventListener("click",w)}),document.addEventListener("keydown",r=>{r.key==="Escape"&&c?$():(r.ctrlKey||r.metaKey)&&r.key==="k"&&(r.preventDefault(),w())}),d?(t.value=d,s.disabled=!1,L(u,d,i),x(),setTimeout(()=>{D()},200)):(s.disabled=!0,E(i)),b(),window.addEventListener("scroll",b),t.addEventListener("input",r=>{if(!(r.currentTarget instanceof HTMLInputElement))return;const h=r.currentTarget.value==="";s.disabled=h,h&&E(i)}),e.addEventListener("submit",r=>{r.preventDefault();const h=t.value;if(h==="")return;const A=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");E(i),L(u,A,i)}),W(o).forEach(r=>{M(r,d)}),k(g)})();const p=document.querySelector("#js-hamburger"),v=document.querySelector("#js-nav"),O=document.querySelectorAll("#js-nav a[href]");p.addEventListener("click",function(){p.classList.toggle("active"),v.classList.toggle("active")});O.forEach(function(e){e.addEventListener("click",function(){p.classList.remove("active"),v.classList.remove("active")})});window.addEventListener("resize",function(){window.innerWidth<768&&(p.classList.remove("active"),v.classList.remove("active"))});const z=new ResizeObserver(()=>{document.body.style.setProperty("--scrollbar-width",window.innerWidth-document.documentElement.clientWidth+"px")});z.observe(document.documentElement);
